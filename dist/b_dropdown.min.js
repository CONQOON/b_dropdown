/*! b_dropdown - v0.1.0 - 2015-03-02
* Copyright (c) 2015 Benjamin Gr√∂ner @ b:dreizehn Licensed MIT */
(function(){define("b_dropdown-option",["jquery"],function(a){var b;return b=function(){function b(c,d){if(this.dropdown=c,d instanceof b)this.$el=d.$el;else if(d instanceof a)this.$el=d.eq(0);else if(d instanceof HTMLElement)this.$el=a(d);else{if("number"!=typeof d)throw"Provided argument is neither a html element nor a number";this.index=d,this.$el=this.options.eq(d)}this.isLink=this.$el.find("a").length?!0:!1}return b.prototype.get$El=function(){return this.$el},b.prototype.getIndex=function(a){return(a||null==this.index)&&(this.index=this.dropdown.$options.index(this.$el)),this.index},b.prototype.getLabel=function(a){return(a||null==this.label)&&(this.label=this.$el.text()),this.label},b.prototype.getValue=function(a){var b;return(a||null==this.value)&&(b=this.isLink?this.$el.attr("href"):this.$el.data("value"),null==b&&(b=this.getLabel(a)),this.value=b),this.value},b.prototype.isLink=function(){return this.isLink},b}()})}).call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("b_dropdown-base",["jquery","b_dropdown-option"],function(b,c){var d;return d=function(){function d(c,d){this.toggle=a(this.toggle,this),this.selectOption=a(this.selectOption,this),this.open=a(this.open,this),this.close=a(this.close,this),this._handleWindowClick=a(this._handleWindowClick,this),this._handleOptionSelection=a(this._handleOptionSelection,this),this.opts=b.extend({},this.defaultOpts,d||{}),this.$el=b(c),this.$toggleHeader=this.$el.find(".b_dropdown-toggle"),this.$menu=this.$el.find("ul"),this.$options=this.$menu.children("li"),this.$hiddenInput=this.$el.find("input[type=hidden]"),this.selectionHandlers=[],this.data={isOpen:!1,isDisabled:!1,options:this._initOptions()},this.opts.staticHeaderText?this.$toggleHeader.html("<span>"+this.opts.staticHeaderText+"</span>"):this.opts.placeholderHeaderText&&this.$toggleHeader.html("<span>"+this.opts.placeholderHeaderText+"</span>"),this.close(),this.bindEvents()}return d.prototype.defaultOpts={closeOnSelect:!0},d.prototype._initOptions=function(){var a,b;return a=this,b=[],this.$options.each(function(){return b.push(new c(a,this))}),b},d.prototype.bindEvents=function(){return this.$toggleHeader.on("click",this.toggle),this.$options.on("click",this._handleOptionSelection),b(window).on("click",this._handleWindowClick)},d.prototype.unbindEvents=function(){return this.$toggleHeader.off("click",this.toggle),b(window).off("click",this._handleWindowClick)},d.prototype._handleOptionSelection=function(a){var c;return this.isDisabled()?void 0:(c=this.$options.index(b(a.currentTarget)),this.selectOption(c),this.opts.closeOnSelect?this.close():void 0)},d.prototype._handleWindowClick=function(a){return this.isDisabled()||!this.isOpen()||b.contains(this.$el.get(0),a.target)?void 0:this.close()},d.prototype.onSelectOption=function(a){return this.selectionHandlers.push(a)},d.prototype.offSelectOption=function(a){var b;return b=this.selectionHandlers.indexOf(a),b>=0?this.selectionHandlers.splice(b,1):void 0},d.prototype.removeAllHandlers=function(){return this.selectionHandlers=[]},d.prototype.close=function(){return this.$menu.hide(),this.data.isOpen=!1},d.prototype.disable=function(){return this.close(),this.$el.addClass("b_dropdown-disabled"),this.$hiddenInput.prop("disabled",!0),this.data.isDisabled=!0},d.prototype.enable=function(){return this.$el.removeClass("b_dropdown-disabled"),this.$hiddenInput.prop("disabled",!1),this.data.isDisabled=!1},d.prototype.getOption=function(a){var d,e;if(a instanceof c)e=this.data.options.indexOf(a);else if(a instanceof b)d=a;else if(a instanceof HTMLElement)d=b(a);else{if("number"!=typeof a)throw"Provided argument is neither a html element nor a number";e=a}return d&&(e=this.$options.index(d)),this.getOptionByIndex(e)},d.prototype.getOptionByIndex=function(a){return this.data.options.length>a?this.data.options[a]:null},d.prototype.getSelectedIndex=function(){var a;return a=this.getSelectedOption(),a?a.getIndex():-1},d.prototype.getSelectedLabel=function(){var a;return a=this.getSelectedOption(),a?a.getLabel():null},d.prototype.getSelectedOption=function(){return this.data.selectedOption||null},d.prototype.getSelectedValue=function(){var a;return a=this.getSelectedOption(),a?a.getValue():null},d.prototype.isDisabled=function(){return this.data.isDisabled},d.prototype.navigateToLink=function(a){return location.href=a},d.prototype.open=function(){return this.$menu.show(),this.data.isOpen=!0},d.prototype.selectOption=function(a,b){var c,d,e,f,g,h,i,j;if(c=this,d=this.getOption(a),d&&(f=new Date,this.data.selectedOption=d,this.opts.staticHeaderText||(this.$toggleHeader.empty(),this.$toggleHeader.html(d.getLabel())),this.$hiddenInput.val(d.getValue()),!b)){for(i=this.selectionHandlers,j=[],g=0,h=i.length;h>g;g++)e=i[g],j.push(function(a){return function(b){return b.call(a,{dropdown:a,option:d,timestamp:f})}}(this)(e));return j}},d.prototype.toggle=function(){return this.isOpen()?this.close():this.open()},d.prototype.isOpen=function(){return this.data.isOpen||!1},d.prototype.destroy=function(){return this.unbindEvents()},d}()})}.call(this),function(){}.call(this),function(){}.call(this),function(){define("b_dropdown",["jquery","b_dropdown-option","b_dropdown-base"],function(a,b,c){return{Option:b,BaseDropdown:c}})}.call(this);